import{r as J}from"./index.17e183eb.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var v=function(){return v=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},v.apply(this,arguments)};function zt(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function E(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function j(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function L(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var D;(function(e){e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose"})(D||(D={}));var ft;(function(e){e.Parent="#_parent",e.Internal="#_internal"})(ft||(ft={}));var At=D.Start,Jt=D.Stop,Nt=D.Raise,Pt=D.Send,re=D.Cancel,Te=D.NullEvent,Lt=D.Assign;D.After;D.DoneState;var ne=D.Log,je=D.Init,Rt=D.Invoke;D.ErrorExecution;var Xt=D.ErrorPlatform,Ne=D.ErrorCustom,ie=D.Update,Pe=D.Choose,De=D.Pure,ae=".",Yt={},_t="xstate.guard",Ie="",K=!0,dt;function Vt(e,t,r){r===void 0&&(r=ae);var n=st(e,r),i=st(t,r);return O(i)?O(n)?i===n:!1:O(n)?n in i:Object.keys(n).every(function(a){return a in i?Vt(n[a],i[a]):!1})}function oe(e){try{return O(e)||typeof e=="number"?"".concat(e):e.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Ct(e,t){try{return rt(e)?e:e.toString().split(t)}catch{throw new Error("'".concat(e,"' is not a valid state path."))}}function ke(e){return typeof e=="object"&&"value"in e&&"context"in e&&"event"in e&&"_event"in e}function st(e,t){if(ke(e))return e.value;if(rt(e))return wt(e);if(typeof e!="string")return e;var r=Ct(e,t);return wt(r)}function wt(e){if(e.length===1)return e[0];for(var t={},r=t,n=0;n<e.length-1;n++)n===e.length-2?r[e[n]]=e[n+1]:(r[e[n]]={},r=r[e[n]]);return t}function it(e,t){for(var r={},n=Object.keys(e),i=0;i<n.length;i++){var a=n[i];r[a]=t(e[a],a,e,i)}return r}function Ht(e,t,r){var n,i,a={};try{for(var o=E(Object.keys(e)),s=o.next();!s.done;s=o.next()){var f=s.value,u=e[f];!r(u)||(a[f]=t(u,f,e))}}catch(h){n={error:h}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}var Ae=function(e){return function(t){var r,n,i=t;try{for(var a=E(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=i[s]}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}};function Le(e,t){return function(r){var n,i,a=r;try{for(var o=E(e),s=o.next();!s.done;s=o.next()){var f=s.value;a=a[t][f]}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}}function mt(e){if(!e)return[[]];if(O(e))return[[e]];var t=k(Object.keys(e).map(function(r){var n=e[r];return typeof n!="string"&&(!n||!Object.keys(n).length)?[[r]]:mt(e[r]).map(function(i){return[r].concat(i)})}));return t}function k(e){var t;return(t=[]).concat.apply(t,L([],j(e),!1))}function se(e){return rt(e)?e:[e]}function B(e){return e===void 0?[]:se(e)}function bt(e,t,r){var n,i;if(P(e))return e(t,r.data);var a={};try{for(var o=E(Object.keys(e)),s=o.next();!s.done;s=o.next()){var f=s.value,u=e[f];P(u)?a[f]=u(t,r.data):a[f]=u}}catch(h){n={error:h}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}function Re(e){return/^(done|error)\./.test(e)}function Kt(e){return!!(e instanceof Promise||e!==null&&(P(e)||typeof e=="object")&&P(e.then))}function _e(e){return e!==null&&typeof e=="object"&&"transition"in e&&typeof e.transition=="function"}function ue(e,t){var r,n,i=j([[],[]],2),a=i[0],o=i[1];try{for(var s=E(e),f=s.next();!f.done;f=s.next()){var u=f.value;t(u)?a.push(u):o.push(u)}}catch(h){r={error:h}}finally{try{f&&!f.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return[a,o]}function ce(e,t){return it(e.states,function(r,n){if(!!r){var i=(O(t)?void 0:t[n])||(r?r.current:void 0);if(!!i)return{current:i,states:ce(r,i)}}})}function Ce(e,t){return{current:t,states:ce(e,t)}}function Qt(e,t,r,n){var i=e&&r.reduce(function(a,o){var s,f,u=o.assignment,h={state:n,action:o,_event:t},d={};if(P(u))d=u(a,t.data,h);else try{for(var c=E(Object.keys(u)),l=c.next();!l.done;l=c.next()){var p=l.value,g=u[p];d[p]=P(g)?g(a,t.data,h):g}}catch(m){s={error:m}}finally{try{l&&!l.done&&(f=c.return)&&f.call(c)}finally{if(s)throw s.error}}return Object.assign({},a,d)},e);return i}var ut=function(){};function rt(e){return Array.isArray(e)}function P(e){return typeof e=="function"}function O(e){return typeof e=="string"}function fe(e,t){if(!!e)return O(e)?{type:_t,name:e,predicate:t?t[e]:void 0}:P(e)?{type:_t,name:e.name,predicate:e}:e}function $e(e){try{return"subscribe"in e&&P(e.subscribe)}catch{return!1}}var q=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();dt={},dt[q]=function(){return this},dt[Symbol.observable]=function(){return this};function G(e){return!!e&&"__xstatenode"in e}function Me(e){return!!e&&typeof e.send=="function"}function qt(e,t){return O(e)||typeof e=="number"?v({type:e},t):e}function $(e,t){if(!O(e)&&"$$type"in e&&e.$$type==="scxml")return e;var r=qt(e);return v({name:r.type,data:r,$$type:"scxml",type:"external"},t)}function X(e,t){var r=se(t).map(function(n){return typeof n=="undefined"||typeof n=="string"||G(n)?{target:n,event:e}:v(v({},n),{event:e})});return r}function Fe(e){if(!(e===void 0||e===Ie))return B(e)}function he(e,t,r,n,i){var a=e.options.guards,o={state:i,cond:t,_event:n};if(t.type===_t)return((a==null?void 0:a[t.name])||t.predicate)(r,n.data,o);var s=a==null?void 0:a[t.type];if(!s)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return s(r,n.data,o)}function le(e){return typeof e=="string"?{type:e}:e}function $t(e,t,r){if(typeof e=="object")return e;var n=function(){};return{next:e,error:t||n,complete:r||n}}function vt(e,t){return"".concat(e,":invocation[").concat(t,"]")}var Et=$({type:je});function Mt(e,t){return t&&t[e]||void 0}function ht(e,t){var r;if(O(e)||typeof e=="number"){var n=Mt(e,t);P(n)?r={type:e,exec:n}:n?r=n:r={type:e,exec:void 0}}else if(P(e))r={type:e.name||e.toString(),exec:e};else{var n=Mt(e.type,t);if(P(n))r=v(v({},e),{exec:n});else if(n){var i=n.type||e.type;r=v(v(v({},n),e),{type:i})}else r=e}return r}var Ot=function(e,t){if(!e)return[];var r=rt(e)?e:[e];return r.map(function(n){return ht(n,t)})};function Gt(e){var t=ht(e);return v(v({id:O(e)?e:t.id},t),{type:t.type})}function Ue(e){return O(e)?{type:Nt,event:e}:de(e,{to:ft.Internal})}function Be(e){return{type:Nt,_event:$(e.event)}}function de(e,t){return{to:t?t.to:void 0,type:Pt,event:P(e)?e:qt(e),delay:t?t.delay:void 0,id:t&&t.id!==void 0?t.id:P(e)?e.name:oe(e)}}function ze(e,t,r,n){var i={_event:r},a=$(P(e.event)?e.event(t,r.data,i):e.event),o;if(O(e.delay)){var s=n&&n[e.delay];o=P(s)?s(t,r.data,i):s}else o=P(e.delay)?e.delay(t,r.data,i):e.delay;var f=P(e.to)?e.to(t,r.data,i):e.to;return v(v({},e),{to:f,_event:a,event:a.data,delay:o})}var Je=function(e,t,r){return v(v({},e),{value:O(e.expr)?e.expr:e.expr(t,r.data,{_event:r})})},Ve=function(e){return{type:re,sendId:e}};function qe(e){var t=Gt(e);return{type:D.Start,activity:t,exec:void 0}}function Ge(e){var t=P(e)?e:Gt(e);return{type:D.Stop,activity:t,exec:void 0}}function We(e,t,r){var n=P(e.activity)?e.activity(t,r.data):e.activity,i=typeof n=="string"?{id:n}:n,a={type:D.Stop,activity:i};return a}var Xe=function(e){return{type:Lt,assignment:e}};function Ye(e,t){var r=t?"#".concat(t):"";return"".concat(D.After,"(").concat(e,")").concat(r)}function pt(e,t){var r="".concat(D.DoneState,".").concat(e),n={type:r,data:t};return n.toString=function(){return r},n}function St(e,t){var r="".concat(D.DoneInvoke,".").concat(e),n={type:r,data:t};return n.toString=function(){return r},n}function at(e,t){var r="".concat(D.ErrorPlatform,".").concat(e),n={type:r,data:t};return n.toString=function(){return r},n}function Ft(e,t,r,n,i,a){a===void 0&&(a=!1);var o=j(a?[[],i]:ue(i,function(c){return c.type===Lt}),2),s=o[0],f=o[1],u=s.length?Qt(r,n,s,t):r,h=a?[r]:void 0,d=k(f.map(function(c){var l;switch(c.type){case Nt:return Be(c);case Pt:var p=ze(c,u,n,e.options.delays);return p;case ne:return Je(c,u,n);case Pe:{var g=c,m=(l=g.conds.find(function(A){var C=fe(A.cond,e.options.guards);return!C||he(e,C,u,n,t)}))===null||l===void 0?void 0:l.actions;if(!m)return[];var T=j(Ft(e,t,u,n,Ot(B(m),e.options.actions),a),2),y=T[0],w=T[1];return u=w,h==null||h.push(u),y}case De:{var m=c.get(u,n.data);if(!m)return[];var I=j(Ft(e,t,u,n,Ot(B(m),e.options.actions),a),2),N=I[0],R=I[1];return u=R,h==null||h.push(u),N}case Jt:return We(c,u,n);case Lt:{u=Qt(u,n,[c],t),h==null||h.push(u);break}default:var x=ht(c,e.options.actions),S=x.exec;if(S&&h){var b=h.length-1;x=v(v({},x),{exec:function(A){for(var C=[],M=1;M<arguments.length;M++)C[M-1]=arguments[M];S.apply(void 0,L([h[b]],j(C),!1))}})}return x}}).filter(function(c){return!!c}));return[d,u]}var ot=function(e,t){var r=t(e);return r};function ve(e){var t;return t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}},t[q]=function(){return this},t}function He(e,t,r,n){var i,a=le(e.src),o=(i=t==null?void 0:t.options.services)===null||i===void 0?void 0:i[a.type],s=e.data?bt(e.data,r,n):void 0,f=o?Ke(o,e.id,s):ve(e.id);return f.meta=e,f}function Ke(e,t,r){var n=ve(t);if(n.deferred=!0,G(e)){var i=n.state=ot(void 0,function(){return(r?e.withContext(r):e).initialState});n.getSnapshot=function(){return i}}return n}function Qe(e){try{return typeof e.send=="function"}catch{return!1}}function Ze(e){return Qe(e)&&"id"in e}function tr(e){var t;return v((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},t[q]=function(){return this},t),e)}var Tt=function(e){return e.type==="atomic"||e.type==="final"};function tt(e){return Object.keys(e.states).map(function(t){return e.states[t]}).filter(function(t){return t.type!=="history"})}function pe(e){var t=[e];return Tt(e)?t:t.concat(k(tt(e).map(pe)))}function Q(e,t){var r,n,i,a,o,s,f,u,h=new Set(e),d=Ut(h),c=new Set(t);try{for(var l=E(c),p=l.next();!p.done;p=l.next())for(var g=p.value,m=g.parent;m&&!c.has(m);)c.add(m),m=m.parent}catch(b){r={error:b}}finally{try{p&&!p.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}var T=Ut(c);try{for(var y=E(c),w=y.next();!w.done;w=y.next()){var g=w.value;if(g.type==="compound"&&(!T.get(g)||!T.get(g).length))d.get(g)?d.get(g).forEach(function(A){return c.add(A)}):g.initialStateNodes.forEach(function(A){return c.add(A)});else if(g.type==="parallel")try{for(var I=(o=void 0,E(tt(g))),N=I.next();!N.done;N=I.next()){var R=N.value;c.has(R)||(c.add(R),d.get(R)?d.get(R).forEach(function(A){return c.add(A)}):R.initialStateNodes.forEach(function(A){return c.add(A)}))}}catch(A){o={error:A}}finally{try{N&&!N.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}}}catch(b){i={error:b}}finally{try{w&&!w.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}try{for(var x=E(c),S=x.next();!S.done;S=x.next())for(var g=S.value,m=g.parent;m&&!c.has(m);)c.add(m),m=m.parent}catch(b){f={error:b}}finally{try{S&&!S.done&&(u=x.return)&&u.call(x)}finally{if(f)throw f.error}}return c}function ye(e,t){var r=t.get(e);if(!r)return{};if(e.type==="compound"){var n=r[0];if(n){if(Tt(n))return n.key}else return{}}var i={};return r.forEach(function(a){i[a.key]=ye(a,t)}),i}function Ut(e){var t,r,n=new Map;try{for(var i=E(e),a=i.next();!a.done;a=i.next()){var o=a.value;n.has(o)||n.set(o,[]),o.parent&&(n.has(o.parent)||n.set(o.parent,[]),n.get(o.parent).push(o))}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n}function er(e,t){var r=Q([e],t);return ye(e,Ut(r))}function xt(e,t){return Array.isArray(e)?e.some(function(r){return r===t}):e instanceof Set?e.has(t):!1}function rr(e){return L([],j(new Set(k(L([],j(e.map(function(t){return t.ownEvents})),!1)))),!1)}function ct(e,t){return t.type==="compound"?tt(t).some(function(r){return r.type==="final"&&xt(e,r)}):t.type==="parallel"?tt(t).every(function(r){return ct(e,r)}):!1}function nr(e){return e===void 0&&(e=[]),e.reduce(function(t,r){return r.meta!==void 0&&(t[r.id]=r.meta),t},{})}function Zt(e){return new Set(k(e.map(function(t){return t.tags})))}function ge(e,t){if(e===t)return!0;if(e===void 0||t===void 0)return!1;if(O(e)||O(t))return e===t;var r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&r.every(function(i){return ge(e[i],t[i])})}function ir(e){return typeof e!="object"||e===null?!1:"value"in e&&"_event"in e}function ar(e,t){var r=e.exec,n=v(v({},e),{exec:r!==void 0?function(){return r(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0});return n}var z=function(){function e(t){var r=this,n;this.actions=[],this.activities=Yt,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||Yt,this.meta=nr(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=(n=Array.isArray(t.tags)?new Set(t.tags):t.tags)!==null&&n!==void 0?n:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return rr(r.configuration)}})}return e.from=function(t,r){if(t instanceof e)return t.context!==r?new e({value:t.value,context:r,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t;var n=Et;return new e({value:t,context:r,_event:n,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,r){if(t instanceof e){if(!t.actions.length)return t;var n=Et;return new e({value:t.value,context:r,_event:n,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,r)},e.prototype.toStrings=function(t,r){var n=this;if(t===void 0&&(t=this.value),r===void 0&&(r="."),O(t))return[t];var i=Object.keys(t);return i.concat.apply(i,L([],j(i.map(function(a){return n.toStrings(t[a],r).map(function(o){return a+r+o})})),!1))},e.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var r=t.tags;t.machine;var n=zt(t,["configuration","transitions","tags","machine"]);return v(v({},n),{tags:Array.from(r)})},e.prototype.matches=function(t){return Vt(t,this.value)},e.prototype.hasTag=function(t){return this.tags.has(t)},e.prototype.can=function(t){var r;K&&ut(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var n=(r=this.machine)===null||r===void 0?void 0:r.getTransitionData(this,t);return!!(n!=null&&n.transitions.length)&&n.transitions.some(function(i){return i.target!==void 0||i.actions.length})},e}(),or={deferEvents:!1},te=function(){function e(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=v(v({},or),t)}return e.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents){this.schedule(t);return}this.process(t)}this.flushEvents()},e.prototype.schedule=function(t){if(!this.initialized||this.processingEvent){this.queue.push(t);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},e.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(r){throw this.clear(),r}finally{this.processingEvent=!1}},e}(),It=new Map,sr=0,yt={bookId:function(){return"x:".concat(sr++)},register:function(e,t){return It.set(e,t),e},get:function(e){return It.get(e)},free:function(e){It.delete(e)}};function Wt(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global}function ur(){var e=Wt();if(e&&"__xstate__"in e)return e.__xstate__}function cr(e){if(!!Wt()){var t=ur();t&&t.register(e)}}function fr(e,t){t===void 0&&(t={});var r=e.initialState,n=new Set,i=[],a=!1,o=function(){if(!a){for(a=!0;i.length>0;){var u=i.shift();r=e.transition(r,u,f),n.forEach(function(h){return h.next(r)})}a=!1}},s=tr({id:t.id,send:function(u){i.push(u),o()},getSnapshot:function(){return r},subscribe:function(u,h,d){var c=$t(u,h,d);return n.add(c),c.next(r),{unsubscribe:function(){n.delete(c)}}}}),f={parent:t.parent,self:s,id:t.id||"anonymous",observers:n};return r=e.start?e.start(f):r,s}var hr={sync:!1,autoForward:!1},_;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(_||(_={}));var lr=function(){function e(t,r){var n=this;r===void 0&&(r=e.defaultOptions),this.machine=t,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=_.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(h,d){if(rt(h))return n.batch(h),n.state;var c=$(qt(h,d));if(n.status===_.Stopped)return n.state;if(n.status!==_.Running&&!n.options.deferEvents)throw new Error('Event "'.concat(c.name,'" was sent to uninitialized service "').concat(n.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(c.data)));return n.scheduler.schedule(function(){n.forward(c);var l=n.nextState(c);n.update(l,c)}),n._state},this.sendTo=function(h,d){var c=n.parent&&(d===ft.Parent||n.parent.id===d),l=c?n.parent:O(d)?n.children.get(d)||yt.get(d):Me(d)?d:void 0;if(!l){if(!c)throw new Error("Unable to send event to child '".concat(d,"' from service '").concat(n.id,"'."));return}"machine"in l?l.send(v(v({},h),{name:h.name===Ne?"".concat(at(n.id)):h.name,origin:n.sessionId})):l.send(h.data)};var i=v(v({},e.defaultOptions),r),a=i.clock,o=i.logger,s=i.parent,f=i.id,u=f!==void 0?f:t.id;this.id=u,this.logger=o,this.clock=a,this.parent=s,this.options=i,this.scheduler=new te({deferEvents:this.options.deferEvents}),this.sessionId=yt.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:ot(this,function(){return t._initialState=t.machine.initialState,t._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(t,r){var n,i;try{for(var a=E(t.actions),o=a.next();!o.done;o=a.next()){var s=o.value;this.exec(s,t,r)}}catch(f){n={error:f}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.update=function(t,r){var n,i,a,o,s,f,u,h,d=this;if(t._sessionid=this.sessionId,this._state=t,this.options.execute&&this.execute(this.state),this.children.forEach(function(b){d.state.children[b.id]=b}),this.devTools&&this.devTools.send(r.data,t),t.event)try{for(var c=E(this.eventListeners),l=c.next();!l.done;l=c.next()){var p=l.value;p(t.event)}}catch(b){n={error:b}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}try{for(var g=E(this.listeners),m=g.next();!m.done;m=g.next()){var p=m.value;p(t,t.event)}}catch(b){a={error:b}}finally{try{m&&!m.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}try{for(var T=E(this.contextListeners),y=T.next();!y.done;y=T.next()){var w=y.value;w(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(b){s={error:b}}finally{try{y&&!y.done&&(f=T.return)&&f.call(T)}finally{if(s)throw s.error}}var I=ct(t.configuration||[],this.machine);if(this.state.configuration&&I){var N=t.configuration.find(function(b){return b.type==="final"&&b.parent===d.machine}),R=N&&N.doneData?bt(N.doneData,t.context,r):void 0;try{for(var x=E(this.doneListeners),S=x.next();!S.done;S=x.next()){var p=S.value;p(St(this.id,R))}}catch(b){u={error:b}}finally{try{S&&!S.done&&(h=x.return)&&h.call(x)}finally{if(u)throw u.error}}this.stop()}},e.prototype.onTransition=function(t){return this.listeners.add(t),this.status===_.Running&&t(this.state,this.state.event),this},e.prototype.subscribe=function(t,r,n){var i=this;if(!t)return{unsubscribe:function(){}};var a,o=n;return typeof t=="function"?a=t:(a=t.next.bind(t),o=t.complete.bind(t)),this.listeners.add(a),this.status!==_.NotStarted&&a(this.state),o&&(this.status===_.Stopped?o():this.onDone(o)),{unsubscribe:function(){a&&i.listeners.delete(a),o&&i.doneListeners.delete(o)}}},e.prototype.onEvent=function(t){return this.eventListeners.add(t),this},e.prototype.onSend=function(t){return this.sendListeners.add(t),this},e.prototype.onChange=function(t){return this.contextListeners.add(t),this},e.prototype.onStop=function(t){return this.stopListeners.add(t),this},e.prototype.onDone=function(t){return this.doneListeners.add(t),this},e.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},e.prototype.start=function(t){var r=this;if(this.status===_.Running)return this;this.machine._init(),yt.register(this.sessionId,this),this.initialized=!0,this.status=_.Running;var n=t===void 0?this.initialState:ot(this,function(){return ir(t)?r.machine.resolveState(t):r.machine.resolveState(z.from(t,r.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){r.update(n,Et)}),this},e.prototype.stop=function(){var t,r,n,i,a,o,s,f,u,h,d=this;try{for(var c=E(this.listeners),l=c.next();!l.done;l=c.next()){var p=l.value;this.listeners.delete(p)}}catch(S){t={error:S}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}try{for(var g=E(this.stopListeners),m=g.next();!m.done;m=g.next()){var p=m.value;p(),this.stopListeners.delete(p)}}catch(S){n={error:S}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}try{for(var T=E(this.contextListeners),y=T.next();!y.done;y=T.next()){var p=y.value;this.contextListeners.delete(p)}}catch(S){a={error:S}}finally{try{y&&!y.done&&(o=T.return)&&o.call(T)}finally{if(a)throw a.error}}try{for(var w=E(this.doneListeners),I=w.next();!I.done;I=w.next()){var p=I.value;this.doneListeners.delete(p)}}catch(S){s={error:S}}finally{try{I&&!I.done&&(f=w.return)&&f.call(w)}finally{if(s)throw s.error}}if(!this.initialized)return this;L([],j(this.state.configuration),!1).sort(function(S,b){return b.order-S.order}).forEach(function(S){var b,A;try{for(var C=E(S.definition.exit),M=C.next();!M.done;M=C.next()){var V=M.value;d.exec(V,d.state)}}catch(lt){b={error:lt}}finally{try{M&&!M.done&&(A=C.return)&&A.call(C)}finally{if(b)throw b.error}}}),this.children.forEach(function(S){P(S.stop)&&S.stop()}),this.children.clear();try{for(var N=E(Object.keys(this.delayedEventsMap)),R=N.next();!R.done;R=N.next()){var x=R.value;this.clock.clearTimeout(this.delayedEventsMap[x])}}catch(S){u={error:S}}finally{try{R&&!R.done&&(h=N.return)&&h.call(N)}finally{if(u)throw u.error}}return this.scheduler.clear(),this.scheduler=new te({deferEvents:this.options.deferEvents}),this.initialized=!1,this.status=_.Stopped,this._initialState=void 0,yt.free(this.sessionId),this},e.prototype.batch=function(t){var r=this;if(!(this.status===_.NotStarted&&this.options.deferEvents)){if(this.status!==_.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}this.scheduler.schedule(function(){var n,i,a=r.state,o=!1,s=[],f=function(c){var l=$(c);r.forward(l),a=ot(r,function(){return r.machine.transition(a,l)}),s.push.apply(s,L([],j(a.actions.map(function(p){return ar(p,a)})),!1)),o=o||!!a.changed};try{for(var u=E(t),h=u.next();!h.done;h=u.next()){var d=h.value;f(d)}}catch(c){n={error:c}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}a.changed=o,a.actions=s,r.update(a,$(t[t.length-1]))})},e.prototype.sender=function(t){return this.send.bind(this,t)},e.prototype.nextState=function(t){var r=this,n=$(t);if(n.name.indexOf(Xt)===0&&!this.state.nextEvents.some(function(a){return a.indexOf(Xt)===0}))throw n.data.data;var i=ot(this,function(){return r.machine.transition(r.state,n)});return i},e.prototype.forward=function(t){var r,n;try{for(var i=E(this.forwardTo),a=i.next();!a.done;a=i.next()){var o=a.value,s=this.children.get(o);if(!s)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));s.send(t)}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.defer=function(t){var r=this;this.delayedEventsMap[t.id]=this.clock.setTimeout(function(){t.to?r.sendTo(t._event,t.to):r.send(t._event)},t.delay)},e.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},e.prototype.exec=function(t,r,n){n===void 0&&(n=this.machine.options.actions);var i=r.context,a=r._event,o=t.exec||Mt(t.type,n),s=P(o)?o:o?o.exec:t.exec;if(s)try{return s(i,a.data,{action:t,state:this.state,_event:a})}catch(I){throw this.parent&&this.parent.send({type:"xstate.error",data:I}),I}switch(t.type){case Pt:var f=t;if(typeof f.delay=="number"){this.defer(f);return}else f.to?this.sendTo(f._event,f.to):this.send(f._event);break;case re:this.cancel(t.sendId);break;case At:{if(this.status!==_.Running)return;var u=t.activity;if(!this.state.activities[u.id||u.type])break;if(u.type===D.Invoke){var h=le(u.src),d=this.machine.options.services?this.machine.options.services[h.type]:void 0,c=u.id,l=u.data,p="autoForward"in u?u.autoForward:!!u.forward;if(!d)return;var g=l?bt(l,i,a):void 0;if(typeof d=="string")return;var m=P(d)?d(i,a.data,{data:g,src:h,meta:u.meta}):d;if(!m)return;var T=void 0;G(m)&&(m=g?m.withContext(g):m,T={autoForward:p}),this.spawn(m,c,T)}else this.spawnActivity(u);break}case Jt:{this.stopChild(t.activity.id);break}case ne:var y=t.label,w=t.value;y?this.logger(y,w):this.logger(w);break}},e.prototype.removeChild=function(t){var r;this.children.delete(t),this.forwardTo.delete(t),(r=this.state)===null||r===void 0||delete r.children[t]},e.prototype.stopChild=function(t){var r=this.children.get(t);!r||(this.removeChild(t),P(r.stop)&&r.stop())},e.prototype.spawn=function(t,r,n){if(Kt(t))return this.spawnPromise(Promise.resolve(t),r);if(P(t))return this.spawnCallback(t,r);if(Ze(t))return this.spawnActor(t,r);if($e(t))return this.spawnObservable(t,r);if(G(t))return this.spawnMachine(t,v(v({},n),{id:r}));if(_e(t))return this.spawnBehavior(t,r);throw new Error('Unable to spawn entity "'.concat(r,'" of type "').concat(typeof t,'".'))},e.prototype.spawnMachine=function(t,r){var n=this;r===void 0&&(r={});var i=new e(t,v(v({},this.options),{parent:this,id:r.id||t.id})),a=v(v({},hr),r);a.sync&&i.onTransition(function(s){n.send(ie,{state:s,id:i.id})});var o=i;return this.children.set(i.id,o),a.autoForward&&this.forwardTo.add(i.id),i.onDone(function(s){n.removeChild(i.id),n.send($(s,{origin:i.id}))}).start(),o},e.prototype.spawnBehavior=function(t,r){var n=fr(t,{id:r,parent:this});return this.children.set(r,n),n},e.prototype.spawnPromise=function(t,r){var n,i=this,a=!1,o;t.then(function(f){a||(o=f,i.removeChild(r),i.send($(St(r,f),{origin:r})))},function(f){if(!a){i.removeChild(r);var u=at(r,f);try{i.send($(u,{origin:r}))}catch{i.devTools&&i.devTools.send(u,i.state),i.machine.strict&&i.stop()}}});var s=(n={id:r,send:function(){},subscribe:function(f,u,h){var d=$t(f,u,h),c=!1;return t.then(function(l){c||(d.next(l),!c&&d.complete())},function(l){c||d.error(l)}),{unsubscribe:function(){return c=!0}}},stop:function(){a=!0},toJSON:function(){return{id:r}},getSnapshot:function(){return o}},n[q]=function(){return this},n);return this.children.set(r,s),s},e.prototype.spawnCallback=function(t,r){var n,i=this,a=!1,o=new Set,s=new Set,f,u=function(c){f=c,s.forEach(function(l){return l(c)}),!a&&i.send($(c,{origin:r}))},h;try{h=t(u,function(c){o.add(c)})}catch(c){this.send(at(r,c))}if(Kt(h))return this.spawnPromise(h,r);var d=(n={id:r,send:function(c){return o.forEach(function(l){return l(c)})},subscribe:function(c){var l=$t(c);return s.add(l.next),{unsubscribe:function(){s.delete(l.next)}}},stop:function(){a=!0,P(h)&&h()},toJSON:function(){return{id:r}},getSnapshot:function(){return f}},n[q]=function(){return this},n);return this.children.set(r,d),d},e.prototype.spawnObservable=function(t,r){var n,i=this,a,o=t.subscribe(function(f){a=f,i.send($(f,{origin:r}))},function(f){i.removeChild(r),i.send($(at(r,f),{origin:r}))},function(){i.removeChild(r),i.send($(St(r),{origin:r}))}),s=(n={id:r,send:function(){},subscribe:function(f,u,h){return t.subscribe(f,u,h)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return a},toJSON:function(){return{id:r}}},n[q]=function(){return this},n);return this.children.set(r,s),s},e.prototype.spawnActor=function(t,r){return this.children.set(r,t),t},e.prototype.spawnActivity=function(t){var r=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(!!r){var n=r(this.state.context,t);this.spawnEffect(t.id,n)}},e.prototype.spawnEffect=function(t,r){var n;this.children.set(t,(n={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:r||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}},n[q]=function(){return this},n))},e.prototype.attachDev=function(){var t=Wt();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var r=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(v(v({name:this.id,autoPause:!0,stateSanitizer:function(n){return{value:n.value,context:n.context,actions:n.actions}}},r),{features:v({jump:!1,skip:!1},r?r.features:void 0)}),this.machine),this.devTools.init(this.state)}cr(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[q]=function(){return this},e.prototype.getSnapshot=function(){return this.status===_.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,r){return setTimeout(t,r)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},e.interpret=me,e}();function me(e,t){var r=new lr(e,t);return r}function dr(e){if(typeof e=="string"){var t={type:e};return t.toString=function(){return e},t}return e}function gt(e){return v(v({type:Rt},e),{toJSON:function(){e.onDone,e.onError;var t=zt(e,["onDone","onError"]);return v(v({},t),{type:Rt,src:dr(e.src)})}})}var Z="",Bt="#",nt="*",Y={},H=function(e){return e[0]===Bt},vr=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},pr=function(e,t,r){var n=r.slice(0,-1).some(function(a){return!("cond"in a)&&!("in"in a)&&(O(a.target)||G(a.target))}),i=t===Z?"the transient event":"event '".concat(t,"'");ut(!n,"One or more transitions for ".concat(i," on state '").concat(e.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},yr=function(){function e(t,r,n,i){var a=this;n===void 0&&(n="context"in t?t.context:void 0);var o;this.config=t,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(vr(),r),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:ae),this.id=this.config.id||L([this.machine.key],j(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(o=this.config.schema)!==null&&o!==void 0?o:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?it(this.config.states,function(u,h){var d,c=new e(u,{},void 0,{parent:a,key:h});return Object.assign(a.idMap,v((d={},d[c.id]=c,d),c.idMap)),c}):Y;var s=0;function f(u){var h,d;u.order=s++;try{for(var c=E(tt(u)),l=c.next();!l.done;l=c.next()){var p=l.value;f(p)}}catch(g){h={error:g}}finally{try{l&&!l.done&&(d=c.return)&&d.call(c)}finally{if(h)throw h.error}}}f(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(u){var h=u.event;return h===Z}):Z in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=B(this.config.entry||this.config.onEntry).map(function(u){return ht(u)}),this.onExit=B(this.config.exit||this.config.onExit).map(function(u){return ht(u)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=B(this.config.invoke).map(function(u,h){var d,c;if(G(u)){var l=vt(a.id,h);return a.machine.options.services=v((d={},d[l]=u,d),a.machine.options.services),gt({src:l,id:l})}else if(O(u.src)){var l=u.id||vt(a.id,h);return gt(v(v({},u),{id:l,src:u.src}))}else if(G(u.src)||P(u.src)){var l=u.id||vt(a.id,h);return a.machine.options.services=v((c={},c[l]=u.src,c),a.machine.options.services),gt(v(v({id:l},u),{src:l}))}else{var p=u.src;return gt(v(v({id:vt(a.id,h)},u),{src:p}))}}),this.activities=B(this.config.activities).concat(this.invoke).map(function(u){return Gt(u)}),this.transition=this.transition.bind(this),this.tags=B(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||pe(this).forEach(function(t){return t.on})},e.prototype.withConfig=function(t,r){var n=this.options,i=n.actions,a=n.activities,o=n.guards,s=n.services,f=n.delays;return new e(this.config,{actions:v(v({},i),t.actions),activities:v(v({},a),t.activities),guards:v(v({},o),t.guards),services:v(v({},s),t.services),delays:v(v({},f),t.delays)},r!=null?r:this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return P(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:it(this.states,function(t){return t.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce(function(r,n){return r[n.eventType]=r[n.eventType]||[],r[n.eventType].push(n),r},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var r=t===Z,n=this.transitions.filter(function(i){var a=i.eventType===t;return r?a:a||i.eventType===nt});return this.__cache.candidates[t]=n,n},e.prototype.getDelayedTransitions=function(){var t=this,r=this.config.after;if(!r)return[];var n=function(a,o){var s=P(a)?"".concat(t.id,":delay[").concat(o,"]"):a,f=Ye(s,t.id);return t.onEntry.push(de(f,{delay:a})),t.onExit.push(Ve(f)),f},i=rt(r)?r.map(function(a,o){var s=n(a.delay,o);return v(v({},a),{event:s})}):k(Object.keys(r).map(function(a,o){var s=r[a],f=O(s)?{target:s}:s,u=isNaN(+a)?a:+a,h=n(u,o);return B(f).map(function(d){return v(v({},d),{event:h,delay:u})})}));return i.map(function(a){var o=a.delay;return v(v({},t.formatTransition(a)),{delay:o})})},e.prototype.getStateNodes=function(t){var r,n=this;if(!t)return[];var i=t instanceof z?t.value:st(t,this.delimiter);if(O(i)){var a=this.getStateNode(i).initial;return a!==void 0?this.getStateNodes((r={},r[i]=a,r)):[this,this.states[i]]}var o=Object.keys(i),s=[this];return s.push.apply(s,L([],j(k(o.map(function(f){return n.getStateNode(f).getStateNodes(i[f])}))),!1)),s},e.prototype.handles=function(t){var r=oe(t);return this.events.includes(r)},e.prototype.resolveState=function(t){var r=t instanceof z?t:z.create(t),n=Array.from(Q([],this.getStateNodes(r.value)));return new z(v(v({},r),{value:this.resolve(r.value),configuration:n,done:ct(n,this),tags:Zt(n),machine:this.machine}))},e.prototype.transitionLeafNode=function(t,r,n){var i=this.getStateNode(t),a=i.next(r,n);return!a||!a.transitions.length?this.next(r,n):a},e.prototype.transitionCompoundNode=function(t,r,n){var i=Object.keys(t),a=this.getStateNode(i[0]),o=a._transition(t[i[0]],r,n);return!o||!o.transitions.length?this.next(r,n):o},e.prototype.transitionParallelNode=function(t,r,n){var i,a,o={};try{for(var s=E(Object.keys(t)),f=s.next();!f.done;f=s.next()){var u=f.value,h=t[u];if(!!h){var d=this.getStateNode(u),c=d._transition(h,r,n);c&&(o[u]=c)}}}catch(y){i={error:y}}finally{try{f&&!f.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}var l=Object.keys(o).map(function(y){return o[y]}),p=k(l.map(function(y){return y.transitions})),g=l.some(function(y){return y.transitions.length>0});if(!g)return this.next(r,n);var m=k(l.map(function(y){return y.entrySet})),T=k(Object.keys(o).map(function(y){return o[y].configuration}));return{transitions:p,entrySet:m,exitSet:k(l.map(function(y){return y.exitSet})),configuration:T,source:r,actions:k(Object.keys(o).map(function(y){return o[y].actions}))}},e.prototype._transition=function(t,r,n){return O(t)?this.transitionLeafNode(t,r,n):Object.keys(t).length===1?this.transitionCompoundNode(t,r,n):this.transitionParallelNode(t,r,n)},e.prototype.getTransitionData=function(t,r){return this._transition(t.value,t,$(r))},e.prototype.next=function(t,r){var n,i,a=this,o=r.name,s=[],f=[],u;try{for(var h=E(this.getCandidates(o)),d=h.next();!d.done;d=h.next()){var c=d.value,l=c.cond,p=c.in,g=t.context,m=p?O(p)&&H(p)?t.matches(st(this.getStateNodeById(p).path,this.delimiter)):Vt(st(p,this.delimiter),Ae(this.path.slice(0,-2))(t.value)):!0,T=!1;try{T=!l||he(this.machine,l,g,r,t)}catch(N){throw new Error("Unable to evaluate guard '".concat(l.name||l.type,"' in transition for event '").concat(o,"' in state node '").concat(this.id,`':
`).concat(N.message))}if(T&&m){c.target!==void 0&&(f=c.target),s.push.apply(s,L([],j(c.actions),!1)),u=c;break}}}catch(N){n={error:N}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}if(!!u){if(!f.length)return{transitions:[u],entrySet:[],exitSet:[],configuration:t.value?[this]:[],source:t,actions:s};var y=k(f.map(function(N){return a.getRelativeStateNodes(N,t.historyValue)})),w=!!u.internal,I=w?[]:k(y.map(function(N){return a.nodesFromChild(N)}));return{transitions:[u],entrySet:I,exitSet:w?[]:[this],configuration:y,source:t,actions:s}}},e.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var r=[],n=t;n&&n!==this;)r.push(n),n=n.parent;return r.push(this),r},e.prototype.escapes=function(t){if(this===t)return!1;for(var r=this.parent;r;){if(r===t)return!1;r=r.parent}return!0},e.prototype.getActions=function(t,r,n,i){var a,o,s,f,u=Q([],i?this.getStateNodes(i.value):[this]),h=t.configuration.length?Q(u,t.configuration):u;try{for(var d=E(h),c=d.next();!c.done;c=d.next()){var l=c.value;xt(u,l)||t.entrySet.push(l)}}catch(x){a={error:x}}finally{try{c&&!c.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}try{for(var p=E(u),g=p.next();!g.done;g=p.next()){var l=g.value;(!xt(h,l)||xt(t.exitSet,l.parent))&&t.exitSet.push(l)}}catch(x){s={error:x}}finally{try{g&&!g.done&&(f=p.return)&&f.call(p)}finally{if(s)throw s.error}}var m=k(t.entrySet.map(function(x){var S=[];if(x.type!=="final")return S;var b=x.parent;if(!b.parent)return S;S.push(pt(x.id,x.doneData),pt(b.id,x.doneData?bt(x.doneData,r,n):void 0));var A=b.parent;return A.type==="parallel"&&tt(A).every(function(C){return ct(t.configuration,C)})&&S.push(pt(A.id)),S}));t.exitSet.sort(function(x,S){return S.order-x.order}),t.entrySet.sort(function(x,S){return x.order-S.order});var T=new Set(t.entrySet),y=new Set(t.exitSet),w=j([k(Array.from(T).map(function(x){return L(L([],j(x.activities.map(function(S){return qe(S)})),!1),j(x.onEntry),!1)})).concat(m.map(Ue)),k(Array.from(y).map(function(x){return L(L([],j(x.onExit),!1),j(x.activities.map(function(S){return Ge(S)})),!1)}))],2),I=w[0],N=w[1],R=Ot(N.concat(t.actions).concat(I),this.machine.options.actions);return R},e.prototype.transition=function(t,r,n){t===void 0&&(t=this.initialState);var i=$(r),a;if(t instanceof z)a=n===void 0?t:this.resolveState(z.from(t,n));else{var o=O(t)?this.resolve(wt(this.getResolvedPath(t))):this.resolve(t),s=n!=null?n:this.machine.context;a=this.resolveState(z.from(o,s))}if(!K&&i.name===nt)throw new Error("An event cannot have the wildcard type ('".concat(nt,"')"));if(this.strict&&!this.events.includes(i.name)&&!Re(i.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(i.name,"'"));var f=this._transition(a.value,a,i)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:a,actions:[]},u=Q([],this.getStateNodes(a.value)),h=f.configuration.length?Q(u,f.configuration):u;return f.configuration=L([],j(h),!1),this.resolveTransition(f,a,a.context,i)},e.prototype.resolveRaisedTransition=function(t,r,n){var i,a=t.actions;return t=this.transition(t,r),t._event=n,t.event=n.data,(i=t.actions).unshift.apply(i,L([],j(a),!1)),t},e.prototype.resolveTransition=function(t,r,n,i){var a,o,s=this;i===void 0&&(i=Et);var f=t.configuration,u=!r||t.transitions.length>0,h=u?er(this.machine,f):void 0,d=r?r.historyValue?r.historyValue:t.source?this.machine.historyValue(r.value):void 0:void 0,c=this.getActions(t,n,i,r),l=r?v({},r.activities):{};try{for(var p=E(c),g=p.next();!g.done;g=p.next()){var m=g.value;m.type===At?l[m.activity.id||m.activity.type]=m:m.type===Jt&&(l[m.activity.id||m.activity.type]=!1)}}catch(F){a={error:F}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}var T=j(Ft(this,r,n,i,c,this.machine.config.preserveActionOrder),2),y=T[0],w=T[1],I=j(ue(y,function(F){return F.type===Nt||F.type===Pt&&F.to===ft.Internal}),2),N=I[0],R=I[1],x=y.filter(function(F){var W;return F.type===At&&((W=F.activity)===null||W===void 0?void 0:W.type)===Rt}),S=x.reduce(function(F,W){return F[W.activity.id]=He(W.activity,s.machine,w,i),F},r?v({},r.children):{}),b=u?t.configuration:r?r.configuration:[],A=ct(b,this),C=new z({value:h||r.value,context:w,_event:i,_sessionid:r?r._sessionid:null,historyValue:h?d?Ce(d,h):void 0:r?r.historyValue:void 0,history:!h||t.source?r:void 0,actions:h?R:[],activities:h?l:r?r.activities:{},events:[],configuration:b,transitions:t.transitions,children:S,done:A,tags:Zt(b),machine:this}),M=n!==w;C.changed=i.name===ie||M;var V=C.history;V&&delete V.history;var lt=!A&&(this._transient||f.some(function(F){return F._transient}));if(!u&&(!lt||i.name===Z))return C;var U=C;if(!A)for(lt&&(U=this.resolveRaisedTransition(U,{type:Te},i));N.length;){var Ee=N.shift();U=this.resolveRaisedTransition(U,Ee._event,i)}var Oe=U.changed||(V?!!U.actions.length||M||typeof V.value!=typeof U.value||!ge(U.value,V.value):void 0);return U.changed=Oe,U.history=V,U},e.prototype.getStateNode=function(t){if(H(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var r=this.states[t];if(!r)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return r},e.prototype.getStateNodeById=function(t){var r=H(t)?t.slice(Bt.length):t;if(r===this.id)return this;var n=this.machine.idMap[r];if(!n)throw new Error("Child state node '#".concat(r,"' does not exist on machine '").concat(this.id,"'"));return n},e.prototype.getStateNodeByPath=function(t){if(typeof t=="string"&&H(t))try{return this.getStateNodeById(t.slice(1))}catch{}for(var r=Ct(t,this.delimiter).slice(),n=this;r.length;){var i=r.shift();if(!i.length)break;n=n.getStateNode(i)}return n},e.prototype.resolve=function(t){var r,n=this;if(!t)return this.initialStateValue||Y;switch(this.type){case"parallel":return it(this.initialStateValue,function(a,o){return a?n.getStateNode(o).resolve(t[o]||a):Y});case"compound":if(O(t)){var i=this.getStateNode(t);return i.type==="parallel"||i.type==="compound"?(r={},r[t]=i.initialStateValue,r):t}return Object.keys(t).length?it(t,function(a,o){return a?n.getStateNode(o).resolve(a):Y}):this.initialStateValue||{};default:return t||Y}},e.prototype.getResolvedPath=function(t){if(H(t)){var r=this.machine.idMap[t.slice(Bt.length)];if(!r)throw new Error("Unable to find state node '".concat(t,"'"));return r.path}return Ct(t,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var r;if(this.type==="parallel")r=Ht(this.states,function(n){return n.initialStateValue||Y},function(n){return n.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));r=Tt(this.states[this.initial])?this.initial:(t={},t[this.initial]=this.states[this.initial].initialStateValue,t)}else r={};return this.__cache.initialStateValue=r,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(t,r){this._init();var n=this.getStateNodes(t);return this.resolveTransition({configuration:n,entrySet:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,r!=null?r:this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var t;if(this.type==="history"){var r=this.config;O(r.target)?t=H(r.target)?wt(this.machine.getStateNodeById(r.target).path.slice(this.path.length-1)):r.target:t=r.target}return t},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(t,r,n){return n===void 0&&(n=!0),n?t.type==="history"?t.resolveHistory(r):t.initialStateNodes:[t]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var t=this;if(Tt(this))return[this];if(this.type==="compound"&&!this.initial)return K||ut(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var r=mt(this.initialStateValue);return k(r.map(function(n){return t.getFromRelativePath(n)}))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var r=j(t),n=r[0],i=r.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var a=this.getStateNode(n);if(a.type==="history")return a.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},e.prototype.historyValue=function(t){if(!!Object.keys(this.states).length)return{current:t||this.initialStateValue,states:Ht(this.states,function(r,n){if(!t)return r.historyValue();var i=O(t)?void 0:t[n];return r.historyValue(i||r.initialStateValue)},function(r){return!r.history})}},e.prototype.resolveHistory=function(t){var r=this;if(this.type!=="history")return[this];var n=this.parent;if(!t){var i=this.target;return i?k(mt(i).map(function(o){return n.getFromRelativePath(o)})):n.initialStateNodes}var a=Le(n.path,"states")(t).current;return O(a)?[n.getStateNode(a)]:k(mt(a).map(function(o){return r.history==="deep"?n.getFromRelativePath(o):[n.states[o[0]]]}))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var t=this,r=k(Object.keys(this.states).map(function(n){return t.states[n].stateIds}));return[this.id].concat(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var t,r,n,i;if(this.__cache.events)return this.__cache.events;var a=this.states,o=new Set(this.ownEvents);if(a)try{for(var s=E(Object.keys(a)),f=s.next();!f.done;f=s.next()){var u=f.value,h=a[u];if(h.states)try{for(var d=(n=void 0,E(h.events)),c=d.next();!c.done;c=d.next()){var l=c.value;o.add("".concat(l))}}catch(p){n={error:p}}finally{try{c&&!c.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{f&&!f.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter(function(r){return!(!r.target&&!r.actions.length&&r.internal)}).map(function(r){return r.eventType}));return Array.from(t)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(t){var r=this;if(t!==void 0)return t.map(function(n){if(!O(n))return n;var i=n[0]===r.delimiter;if(i&&!r.parent)return r.getStateNodeByPath(n.slice(1));var a=i?r.key+n:n;if(r.parent)try{var o=r.parent.getStateNodeByPath(a);return o}catch(s){throw new Error("Invalid transition definition for state node '".concat(r.id,`':
`).concat(s.message))}else return r.getStateNodeByPath(a)})},e.prototype.formatTransition=function(t){var r=this,n=Fe(t.target),i="internal"in t?t.internal:n?n.some(function(f){return O(f)&&f[0]===r.delimiter}):!0,a=this.machine.options.guards,o=this.resolveTarget(n),s=v(v({},t),{actions:Ot(B(t.actions)),cond:fe(t.cond,a),target:o,source:this,internal:i,eventType:t.event,toJSON:function(){return v(v({},s),{target:s.target?s.target.map(function(f){return"#".concat(f.id)}):void 0,source:"#".concat(r.id)})}});return s},e.prototype.formatTransitions=function(){var t,r,n=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var a=this.config.on,o=nt,s=a[o],f=s===void 0?[]:s,u=zt(a,[typeof o=="symbol"?o:o+""]);i=k(Object.keys(u).map(function(y){!K&&y===Z&&ut(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(n.id,'".'));var w=X(y,u[y]);return K||pr(n,y,w),w}).concat(X(nt,f)))}var h=this.config.always?X("",this.config.always):[],d=this.config.onDone?X(String(pt(this.id)),this.config.onDone):[];K||ut(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var c=k(this.invoke.map(function(y){var w=[];return y.onDone&&w.push.apply(w,L([],j(X(String(St(y.id)),y.onDone)),!1)),y.onError&&w.push.apply(w,L([],j(X(String(at(y.id)),y.onError)),!1)),w})),l=this.after,p=k(L(L(L(L([],j(d),!1),j(c),!1),j(i),!1),j(h),!1).map(function(y){return B(y).map(function(w){return n.formatTransition(w)})}));try{for(var g=E(l),m=g.next();!m.done;m=g.next()){var T=m.value;p.push(T)}}catch(y){t={error:y}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}return p},e}();function gr(e,t){return new yr(e,t)}var mr=Xe,Se={exports:{}},xe={},we={exports:{}},be={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var et=J.exports;function Sr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xr=typeof Object.is=="function"?Object.is:Sr,wr=et.useState,br=et.useEffect,Er=et.useLayoutEffect,Or=et.useDebugValue;function Tr(e,t){var r=t(),n=wr({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return Er(function(){i.value=r,i.getSnapshot=t,kt(i)&&a({inst:i})},[e,r,t]),br(function(){return kt(i)&&a({inst:i}),e(function(){kt(i)&&a({inst:i})})},[e]),Or(r),r}function kt(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!xr(e,r)}catch{return!0}}function jr(e,t){return t()}var Nr=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?jr:Tr;be.useSyncExternalStore=et.useSyncExternalStore!==void 0?et.useSyncExternalStore:Nr;we.exports=be;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt=J.exports,Pr=we.exports;function Dr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ir=typeof Object.is=="function"?Object.is:Dr,kr=Pr.useSyncExternalStore,Ar=Dt.useRef,Lr=Dt.useEffect,Rr=Dt.useMemo,_r=Dt.useDebugValue;xe.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=Ar(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Rr(function(){function f(l){if(!u){if(u=!0,h=l,l=n(l),i!==void 0&&o.hasValue){var p=o.value;if(i(p,l))return d=p}return d=l}if(p=d,Ir(h,l))return p;var g=n(l);return i!==void 0&&i(p,g)?p:(h=l,d=g)}var u=!1,h,d,c=r===void 0?null:r;return[function(){return f(t())},c===null?void 0:function(){return f(c())}]},[t,r,n,i]);var s=kr(e,a[0],a[1]);return Lr(function(){o.hasValue=!0,o.value=s},[s]),_r(s),s};Se.exports=xe;var Cr=J.exports.useLayoutEffect;function ee(e){var t=J.exports.useRef();return t.current||(t.current={v:e()}),t.current.v}var jt=globalThis&&globalThis.__assign||function(){return jt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},jt.apply(this,arguments)},$r=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};globalThis&&globalThis.__read;function Mr(e,t){var r=ee(function(){return typeof e=="function"?e():e}),n=t.context,i=t.guards,a=t.actions,o=t.activities,s=t.services,f=t.delays;t.state;var u=$r(t,["context","guards","actions","activities","services","delays","state"]),h=ee(function(){var d={context:n,guards:i,actions:a,activities:o,services:s,delays:f},c=r.withConfig(d,function(){return jt(jt({},r.context),n)});return me(c,u)});return Cr(function(){Object.assign(h.machine.options.actions,a),Object.assign(h.machine.options.guards,i),Object.assign(h.machine.options.activities,o),Object.assign(h.machine.options.services,s),Object.assign(h.machine.options.delays,f)},[a,i,o,s,f]),h}var Fr=globalThis&&globalThis.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a};function Ur(e){return e}function Br(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Fr(t,1),i=n[0],a=i===void 0?{}:i,o=Mr(e,a),s=J.exports.useCallback(function(){return o.status===_.NotStarted?a.state?z.create(a.state):o.machine.initialState:o.state},[o]),f=J.exports.useCallback(function(d,c){if(o.status===_.NotStarted)return!0;var l=c.changed===void 0&&(Object.keys(c.children).length>0||typeof d.changed=="boolean");return!(c.changed||l)},[o]),u=J.exports.useCallback(function(d){var c=o.subscribe(d).unsubscribe;return c},[o]),h=Se.exports.useSyncExternalStoreWithSelector(u,s,s,Ur,f);return J.exports.useEffect(function(){var d=a.state;return o.start(d?z.create(d):void 0),function(){o.stop(),o.status=_.NotStarted}},[]),[h,o.send,o]}const zr=gr({context:{value:""},id:"DebouncingInput",on:{onInput:{actions:"updateValue",target:".Input"}},initial:"Idle",states:{Idle:{},Debouncing:{after:{delay:{actions:"fireChangeEvent",target:"Idle"}}},Input:{always:{target:"Debouncing"}}}},{actions:{updateValue:mr({value:(e,t)=>t.value})}});function Vr(e,{delay:t=500,defaultValue:r=""}){const n=J.exports.useMemo(()=>({delays:{delay:t},actions:{fireChangeEvent:s=>e==null?void 0:e(s.value)},context:{value:r}}),[t,e]),[i,a]=Br(zr,n),o=J.exports.useCallback(s=>a("onInput",{value:s}),[a]);return[i.context.value,o,i.matches("Debouncing")]}export{Br as a,mr as b,gr as c,Vr as u};
//# sourceMappingURL=useDebounce.71098d6d.js.map
